# Hello World with Docker

### Goal:
1. Understand docker functionality
2. How docker run containers.
3. How to view logs of a container
4. How to stop a running container
5. How to delete a container.

## Running your first container
Now that we have installed docker on our system we can use docker cli to run our fist app

```bash
docker run ubuntu
```

The above command will first try to look if the image is available locally in /var/lib/docker directory on the host machine. If not, it will download the ubuntu image from the docker hub and run the container.

command to see the running containers

```bash
docker ps
```

Surprisingly you won't find the ubuntu container in above command output. Reason is that the container runs to completion.
To view the executed container, use below command -

```bash
docker ps -a
```

## Breaking down the docker ps command output
Let's break down and understand the output of docker ps command

```
CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES
6257218f59ed   nginx     "/docker-entrypoint.â€¦"   23 minutes ago   Up 23 minutes   80/tcp    relaxed_sinoussi
```

* CONTAINER ID : The first column shows a container ID, docker assigns each container a unique container ID generated by the container runtime (runc). The full container ID is a 64-character hexadecimal string, typically generated using a cryptographic function (like SHA256), and it Uniquely identifies the container across the host system. It iss generated at the time of container creation by the Docker daemon.

* IMAGE: This column shows which image is used to create this container.

* COMMAND: This column shows what command the container executes on startup.

* CREATED: This column shows when the contianer was created.

* STATUS: This column show the present status of the container, looking at this we find out whether our container is running or is stopped. In the above output it shows the container is up from last 23 minutes.

* PORTS: This column shows any port that the container has exposed to the world for the incoming connections.

* NAMES: This column show the name of the container. You can pass a name to your container during runtime i.e. along with the docker run command with a --name flag
```
$ docker run --name dockerRocks ubuntu

#Output
CONTAINER ID   IMAGE     COMMAND       CREATED         STATUS                     PORTS     NAMES
fef4125a4b7b   ubuntu    "/bin/bash"   5 seconds ago   Exited (0) 5 seconds ago             dockerRocks
```


## Running a container in foreground and in detached mode
You must be wondering, though you ran the ubuntu container, why it exited out instead of keep on running.
When you run a Docker container using the docker run command you're instructing Docker to start and run the container .However, whether the container remains running or stops immediately after being started depends on the command that the container is configured to execute upon startup.
In this case, ubuntu container is not instructed to run anything. Let's pass a command to the container at the time of running it.

```bash
docker run ubuntu hostname
```

```bash
docker run ubuntu cat /etc/hosts
```

Let's take another session as well, on one session run the below command and on another run 'docker ps'. You will notice the ubuntu container will be seen as running.
```bash
docker run ubuntu sleep 15
```

In above cases, you would have seen that the command passed to the ubuntu container (hostname and cat /etc/hosts) return output from the container and then exits. Whereas in case of third command it exits after 15 seconds. Hence if there is such a command that keeps on running that will keep the contianer in running state.

Let's try with another image - nginx which is a web server.

```bash
docker run nginx
```

This command will start a nginx container in the foreground and you can see output from the nginx process. But you don't see a prompt which makes your terminal unusable. If you do a Ctrl+C here it will bring you back to your original session, but the nginx container is terminated. This is because the container was running in the foreground.

Let's run it in the background.
```bash
docker run nginx -d
```

the -d flag will run the container in detached mode meaning the container will run in the background. Now, if you run 'docker ps' it will show your nginx container as running.

You can even take a console of the nginx container and interact with the container. First lets get the container ID.
```bash
# Copy the container ID corresponding to the nginx container.
docker ps

#run the exec command to connect with the container interactively
docker exec -it <containerID> bash
```

docker exec command is used to execute a command on the contianer, in this case we are executing bash to open a bash terminal on the container. The -it flag instructs docke rdaemon to open the shell in interactive mode.

### View logs of a container
Now that we have started the container in the background/detached mode. If something goes wrong, how will we be able to troubleshoot it? where can we check logs?

```bash
docker logs <containerID>
```

The docker logs command is capable of extracting logs from a running as well as stopped containers.

### Stopping a container

use docker stop command to stop a running container.
```bash
docker stop <containerID>
```

### Deleting the container

use docker rm command to delete the container. The container must be in stopped state before deleting it.

```bash
docker rm <containerID>
```


## Bonus
Docker stores all these container related files like config, logs, mounts at /var/lib/docker directory. Under this you will find directories named with containerIDs.
